$def with(plugin_options, events)

$var title: $_('CLI Control settings')
$var page: plugins

<style>
.switch {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 24px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.switch::before {
  position: absolute;
  left: -40px;
  top: 50%;
  transform: translateY(-50%);
  color: red;
  font-weight: bold;
}

.switch::after {
  position: absolute;
  right: -40px;
  top: 50%;
  transform: translateY(-50%);
  color: green;
  font-weight: bold;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: red;
  transition: 0.4s;
  border-radius: 24px;
}

.slider:before {
  position: absolute;
  content: "";
  height: 18px;
  width: 18px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  transition: 0.4s;
  border-radius: 50%;
}

input:checked + .slider {
  background-color: green;
}

input:checked + .slider:before {
  transform: translateX(26px);
}

.switch {
  display: inline-block;
}

.switch input {
  display: none;
}
</style>

<script>
    // Initialize behaviors
    jQuery(document).ready(function(){

        jQuery("#cSubmit").click(function() {
            jQuery("#pluginForm").submit();
        });
        jQuery("button#cCancel").click(function(){
            window.location="/";
        });

    });
</script>

<div id="plugin">
    <div class="title">$_('CLI Control settings')</div>
    <a href=$plugins.plugin_url('cli_control.help_page') class="button upload">$_('Help')</a><br/>
    $if plugin_options['use_log']:
        <p>
        <a href=$plugins.plugin_url('cli_control.log_csv') class="button download">$_('Download log')</a>
        <a href="?show" class="button backup">$_('Show logs')</a>
        <a href="?delete" class="button cancel danger">$_('Delete all logs')</a>
        </p></br>
    <form id="pluginForm" action="$plugins.plugin_url('cli_control.settings_page')" method="post">
        <table class="optionList">
            <tr>
                <td style='text-transform: none;'>$_('Use CLI Control'):</td>
                <td title=$:{json.dumps(_('Activate this extension for CLI control.'), ensure_ascii=False)}>
                <label class="switch">
                <input name='use_control' type='checkbox'${" checked" if plugin_options['use_control'] else ""}>
                <span class="slider"></span>
                </label>
                </td>
            </tr>
            <tr>
                <td style='text-transform: none;'>$_('Enable logging'):</td>
                <td title=$:{json.dumps(_('Activate this for CLI logging.'), ensure_ascii=False)}>
                <label class="switch">
                <input name='use_log' type='checkbox'${" checked" if plugin_options['use_log'] else ""}>
                <span class="slider"></span>
                </label>
                </td>
            </tr>
            <tr>
                <th class="stationNumber">$_('Station')</th>
                <th class="columnName">$_('Start Command')</th>
                <th class="columnName">$_('Stop Command')</th>
            </tr>
            $for c in range(0,options.output_count):
                <tr>
                    <td class="stationNumber">${c + 1}</td>
                    <td class="command">
                       <input type="text" size="30" value="${plugin_options['on'][c] if c < len(plugin_options['on']) else ''}" id="con${c}" name="con${c}">
                       <a href="?test=${c}&state=1" class="button upload">$_('Test')</a>
                    </td>
                    <td>
                       <input type="text" size="30" value="${plugin_options['off'][c] if c < len(plugin_options['off']) else ''}"  id="coff${c}" name="coff${c}">
                       <a href="?test=${c}" class="button upload">$_('Test')</a>
                    </td>
                </tr>
            <tr>
               <td style='text-transform: none;'>$_('Status'):</td>
               <td colspan="2">
                    <textarea style="font-family: monospace;" rows="15" cols="60" readonly>$'\n'.join(events)</textarea>
               </td>
            </tr>
        </table>
    </form>
</div>

<div id="controls">
    <button id="cSubmit" class="submit"><b>$_('Submit')</b></button>
    <button id="cCancel" class="cancel danger">$_('Cancel')</button>
</div>
