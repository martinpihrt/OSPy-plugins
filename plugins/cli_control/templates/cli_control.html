$def with(plugin_options, events)

$var title: $_('CLI Control settings')
$var page: plugins

<style>
/* Style for switch toggle switch */
.switch {
    position: absolute;
    bottom: 10px;
    right: 10px;
    display: inline-block;
    width: 50px;
    height: 24px;
}

.switch input {
    display: none;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc; /* Default grey colour */
    transition: 0.4s;
    border-radius: 34px;
}

.slider:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    border-radius: 50%;
    left: 4px;
    bottom: 3px;
    background-color: white;
    transition: 0.4s;
}

/* When the switch is on */
input:checked + .slider {
    background-color: #4caf50; /* Green colour when switched on */
}

input:checked + .slider:before {
    transform: translateX(26px);
}

/* When the switch is off, set the background colour to red */
input:not(:checked) + .slider {
    background-color: #ff4d4d;  /* Red colour when switched off */
}
</style>

<script>
    // Initialize behaviors
    jQuery(document).ready(function(){

        jQuery("#cSubmit").click(function() {
            jQuery("#pluginForm").submit();
        });
        jQuery("button#cCancel").click(function(){
            window.location="/";
        });

    });
</script>

<div id="plugin">
    <div class="title">$_('CLI Control settings')</div>
    <a href=$plugins.plugin_url('cli_control.help_page') class="button upload">$_('Help')</a><br/>
    $if plugin_options['use_log']:
        <p>
        <a href=$plugins.plugin_url('cli_control.log_csv') class="button download">$_('Download log')</a>
        <a href="?show" class="button backup">$_('Show logs')</a>
        <a href="?delete" class="button cancel danger">$_('Delete all logs')</a>
        </p></br>
    <form id="pluginForm" action="$plugins.plugin_url('cli_control.settings_page')" method="post">
        <table class="optionList">
            <tr>
                <td style='text-transform: none;'>$_('Use CLI Control'):</td>
                <td>
                    <label class="switch">
                    <input name='use_control' type='checkbox'${" checked" if plugin_options['use_control'] else ""}>
                    <span class="slider"></span>
                    </label>
                </td>
            </tr>
            <tr>
                <td style='text-transform: none;'>$_('Enable logging'):</td>
                <td>
                    <label class="switch">
                    <input name='use_log' type='checkbox'${" checked" if plugin_options['use_log'] else ""}>
                    <span class="slider"></span>
                    </label>
                </td>
            </tr>
            <tr>
                <th class="stationNumber">$_('Station')</th>
                <th class="columnName">$_('Start Command')</th>
                <th class="columnName">$_('Stop Command')</th>
            </tr>
            $for c in range(0,options.output_count):
                <tr>
                    <td class="stationNumber">${c + 1}</td>
                    <td class="command">
                       <input type="text" size="30" value="${plugin_options['on'][c] if c < len(plugin_options['on']) else ''}" id="con${c}" name="con${c}">
                       <a href="?test=${c}&state=1" class="button upload">$_('Test')</a>
                    </td>
                    <td>
                       <input type="text" size="30" value="${plugin_options['off'][c] if c < len(plugin_options['off']) else ''}"  id="coff${c}" name="coff${c}">
                       <a href="?test=${c}" class="button upload">$_('Test')</a>
                    </td>
                </tr>
            <tr>
               <td style='text-transform: none;'>$_('Status'):</td>
               <td colspan="2">
                    <textarea style="font-family: monospace;" rows="15" cols="60" readonly>$'\n'.join(events)</textarea>
               </td>
            </tr>
        </table>
    </form>
</div>

<div id="controls">
    <button id="cSubmit" class="submit"><b>$_('Submit')</b></button>
    <button id="cCancel" class="cancel danger">$_('Cancel')</button>
</div>
