$def with(plugin_options, events)

$var title: $_('Email Notifications')
$var page: plugins

<script>
    // Initialize behaviors
    jQuery(document).ready(function(){

        jQuery("#cSubmit").click(function() {
            jQuery("#pluginForm").submit();
        });
        jQuery("button#cCancel").click(function(){
            window.location="/";
        });
        jQuery("#cTest").click(function() {
            jQuery("#pluginForm").attr('action', "$plugins.plugin_url('email_notifications.settings_page')?test")
            jQuery("#pluginForm").submit();
        });

    });
</script>

<div id="plugin">
    <div class="title">$_('Email Notifications')</div>
    <p>$_('This plugin can send E-mails. For this plugin you need an e-mail smtp account as provider.')</p>
    <form id="pluginForm" action="$plugins.plugin_url('email_notifications.settings_page')" method="post">
        <table class="optionList">
            <tr>
                <td style='text-transform: none;'>$_('Send E-mail after power on'):</td>
                <td>
                    <input name='emlpwron' type='checkbox'${" checked" if plugin_options['emlpwron'] else ""}> $_('with events.log file') <input name='emllog' type='checkbox'${" checked" if plugin_options['emllog'] else ""}> 
                </td>
            </tr>
            <tr>
                <td style='text-transform: none;'>$_('Send E-mail if rain is detected'):</td>
                <td>
                    <input name='emlrain' type='checkbox'${" checked" if plugin_options['emlrain'] else ""}>
                </td>
            </tr>

            <tr>
                <td style='text-transform: none;'>$_('Send E-mail if a program has finished'):</td>
                <td>
                    <input name='emlrun' type='checkbox'${" checked" if plugin_options['emlrun'] else ""}>
                </td>
            </tr>
            <tr>
                <td style='text-transform: none;'>$_('SMTP server address'):
                    <div><small>$_('example'): smtp.gmail.com</small></div>
                </td>
                <td>
                    <input name='emlserver' type='text' value='$plugin_options["emlserver"]'>
                </td>
            </tr>      
            <tr>
                <td style='text-transform: none;'>$_('SMTP port'):
                    <div><small>$_('example'): 587</small></div>
                </td>
                <td>
                    <input name='emlport' type='text' value='$plugin_options["emlport"]'>
                </td>
            </tr>
            <td style='text-transform: none;'>$_('Use SMTP username as sender'):
              <div><small>$_('Some SMTP providers prohibit to use another sender than the same mail user')</small></div>
            </td>
            <td>
                <input name='emlsender' type='checkbox' ${" checked" if plugin_options['emlsender'] else ""}>
            </td>
            <tr>
                <td style='text-transform: none;'>$_('SMTP username'):
                    <div><small>$_('Your E-mail username')</small></div>
                </td>
                <td>
                    <input name='emlusr' type='text' value='$plugin_options["emlusr"]'> 
                </td>
            </tr>
            <tr>
                <td style='text-transform: none;'>$_('SMTP password'):
                    <div><small>$_('Your E-mail password')</small></div>
                </td>
                <td>
                    <input name='emlpwd' type='password' value='$plugin_options["emlpwd"]'>
                </td>
            </tr>
            <tr>
                <td style='text-transform: none;'>$_('Send E-mail to'):</td>
                <td>
                    <input name='emladr0' type='text' value='$plugin_options["emladr0"]'>
                </td>
            </tr>
            <tr>
                <td style='text-transform: none;'>$_('Send E-mail to'):</td>
                <td>
                    <input name='emladr1' type='text' value='$plugin_options["emladr1"]'>
                </td>
            </tr>
            <tr>
                <td style='text-transform: none;'>$_('Send E-mail to'):</td>
                <td>
                    <input name='emladr2' type='text' value='$plugin_options["emladr2"]'>
                </td>
            </tr>
            <tr>
                <td style='text-transform: none;'>$_('Send E-mail to'):</td>
                <td>
                    <input name='emladr3' type='text' value='$plugin_options["emladr3"]'>
                </td>
            </tr>
            <tr>
                <td style='text-transform: none;'>$_('Send E-mail to'):</td>
                <td>
                    <input name='emladr4' type='text' value='$plugin_options["emladr4"]'>
                </td>
            </tr>
            <tr>
                <td style='text-transform: none;'>$_('E-mail subject'):</td>
                <td>
                    <input name='emlsubject' type='text' value='$plugin_options["emlsubject"]'>
                </td>
            </tr>
            <tr>
                <td style='text-transform: none;'>$_('Status'):</td>
                <td>
                    <textarea style="font-family: monospace;" rows="7" cols="35" readonly>$'\n'.join(events)</textarea>
                </td>
            </tr>
        </table>
    </form>
</div>
<div id="controls">
    <button id="cSubmit" class="submit"><b>$_('Submit')</b></button>
    <button id="cTest" class="submit"><b>$_('Send a test e-mail')</b></button>
    <button id="cCancel" class="cancel danger">$_('Cancel')</button>
</div>
                                  
                     
