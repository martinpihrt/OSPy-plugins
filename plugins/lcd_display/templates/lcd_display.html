$def with(plugin_options, events)

$var title: $_('LCD settings')
$var page: plugins

<script>
    // Initialize behaviors
    jQuery(document).ready(function(){

        jQuery("#cSubmit").click(function() {
            jQuery("#pluginForm").submit();
        });
        jQuery("button#cCancel").click(function(){
            window.location="/";
        });

    });
</script>

<div id="plugin">
    <div class="title">$_('LCD settings')</div>
    <p>$_('This plugin shows information on a 16x2 character LCD with') PCF8574.</p>
    <p>$_('Automatically detects the display at the following') I&sup2;C $_('addresses'): 0x20-0x27, 0x38-0x3F.</p>
    <p>$_('Compatible with the HD44780 controller').</p>
    <p>$_('Warning: The LCD display must not have the same') I&sup2;C $_('address as other extensions. For example, if you use the Button Control extension, it has a 0x27 address, like some LCD displays. If you have the same address, change it on the LCD board!')</p>
    <p>$_('Visit') <a href="https://pihrt.com/elektronika/315-arduino-uno-deska-i2c-lcd-16x2">Martin Pihrt blog</a> $_('for more information').</p><br>
    <form id="pluginForm" action="$plugins.plugin_url('lcd_display.settings_page')" method="post">
        <table class="optionList">
            <tr>
                <td style='text-transform: none;'>$_('Use') I&sup2;C $_('LCD'):</td>
                <td>
                    <input name='use_lcd' type='checkbox'${" checked" if plugin_options['use_lcd'] else ""}>
                </td>
            </tr>
            <tr>
                <td style='text-transform: none;'>$_('HW version I2C PCF8574<->LCD'):</td>
                <td>
                    <select name="hw_PCF8574">
                        <option value="0" ${"selected" if plugin_options['hw_PCF8574']==0 else ""}>$_('Lower 4 bits of expander are commands bits')</option>
                        <option value="1" ${"selected" if plugin_options['hw_PCF8574']==1 else ""}>$_('Top 4 bits of expander are commands bits AND P0-4 P1-5 P2-6 (Use for LCD2004 board)')</option>
                        <option value="2" ${"selected" if plugin_options['hw_PCF8574']==2 else ""}>$_('Top 4 bits of expander are commands bits AND P0-6 P1-5 P2-4')</option>
                        <option value="3" ${"selected" if plugin_options['hw_PCF8574']==3 else ""}>$_('LCD2004 board where lower 4 are commands, but backlight is pin 3')</option>
                        <option value="4" ${"selected" if plugin_options['hw_PCF8574']==4 else ""}>$_('LCD board www.pihrt.com')</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td style='text-transform: none;'>$_('Use print lines to debug files'):</td>
                <td>
                    <input name='debug_line' type='checkbox'${" checked" if plugin_options['debug_line'] else ""}>
                </td>
            </tr>
            <tr>
                <td style='text-transform: none;' rowspan='15'>$_('Display'):</td>
                <td> $_('System Name'):</td>
                <td>
                    <input name='d_system_name' type='checkbox'${" checked" if plugin_options['d_system_name'] else ""}>
                </td>
            </tr>
            <tr>
                <td> $_('SW Version Date'):</td>
                <td>
                    <input name='d_sw_version_date' type='checkbox'${" checked" if plugin_options['d_sw_version_date'] else ""}>
                </td>
            </tr>
            <tr>
                <td> $_('IP'):</td>
                <td>
                    <input name='d_ip' type='checkbox'${" checked" if plugin_options['d_ip'] else ""}>
                </td>
            </tr>
            <tr>
                <td> $_('Port'):</td>
                <td>
                    <input name='d_port' type='checkbox'${" checked" if plugin_options['d_port'] else ""}>
                </td>
            </tr>
            <tr>
                <td> $_('CPU Temp'):</td>
                <td>
                    <input name='d_cpu_temp' type='checkbox'${" checked" if plugin_options['d_cpu_temp'] else ""}>
                </td>
            </tr>
            <tr>
                <td> $_('Time and Date'):</td>
                <td>
                    <input name='d_time_date' type='checkbox'${" checked" if plugin_options['d_time_date'] else ""}>
                </td>
            </tr>
            <tr>
                <td> $_('Uptime'):</td>
                <td>
                    <input name='d_uptime' type='checkbox'${" checked" if plugin_options['d_uptime'] else ""}>
                </td>
            </tr>
            <tr>
                <td> $_('Rain Sensor'):</td>
                <td>
                    <input name='d_rain_sensor' type='checkbox'${" checked" if plugin_options['d_rain_sensor'] else ""}>
                </td>
            </tr>
            <tr>
                <td> $_('Last Run Program'):</td>
                <td>
                    <input name='d_last_run' type='checkbox'${" checked" if plugin_options['d_last_run'] else ""}>
                </td>
            </tr>
            <tr>
                <td> $_('Pressure Sensor'):</td>
                <td>
                    <input name='d_pressure_sensor' type='checkbox'${" checked" if plugin_options['d_pressure_sensor'] else ""}>
                </td>
            </tr>
            <tr>
                <td> $_('Water Tank Level'):</td>
                <td>
                    <input name='d_water_tank_level' type='checkbox'${" checked" if plugin_options['d_water_tank_level'] else ""}>
                </td>
            </tr>
            <tr>
                <td> $_('DS18B20 Temperature'):</td>
                <td>
                    <input name='d_temperature' type='checkbox'${" checked" if plugin_options['d_temperature'] else ""}>
                </td>
            </tr>              
            <tr>
                <td> $_('Running Stations'):</td>
                <td>
                    <input name='d_running_stations' type='checkbox'${" checked" if plugin_options['d_running_stations'] else ""}>
                </td>
            </tr> 
            <tr>
                <td> $_('Schedule - Manual'):</td>
                <td>
                    <input name='d_sched_manu' type='checkbox'${" checked" if plugin_options['d_sched_manu'] else ""}>
                </td>
            </tr>  
            <tr>
                <td> $_('System enabled'):</td>
                <td>
                    <input name='d_syst_enabl' type='checkbox'${" checked" if plugin_options['d_syst_enabl'] else ""}>
                </td>
            </tr>                   
            <tr>       

            <tr>
                <td style='text-transform: none;'>$_('Status'):</td>
                <td>
                    <textarea style="font-family: monospace;" rows="7" cols="55" readonly>$'\n'.join(events)</textarea>
                </td>
            </tr>
        </table>
    </form>
</div>
<div id="controls">
    <button id="cSubmit" class="submit"><b>$_('Submit')</b></button>
    <button id="cCancel" class="cancel danger">$_('Cancel')</button>
    <a href="?refind"    class="button cancel danger">$_('Re-find I2C address')</a>
</div>