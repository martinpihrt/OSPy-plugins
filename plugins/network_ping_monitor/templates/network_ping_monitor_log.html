$def with(records, records_sql, plugin_options)

$var title: $_('Network Ping monitor - log')
$var page: plugins

<div class="title">$_('Network Ping monitor - log')</div>
<div id="plugin">
    <div id="graph-container" class="graph-container">
        <p>
        $if plugin_options['type_log'] == 0:
            $_('Log from local file')
        $else:
            $_('Log from database')
        </p>
        <p>
        $if plugin_options['type_log'] == 0:
            $_('Total number of records'): ${len(records)}
        $if plugin_options['type_log'] == 1 and records_sql is not None:
            $_('Total number of records'): ${len(records_sql)}
        </p>

        <p>
        $if plugin_options['type_log'] == 0:
            <a href=$plugins.plugin_url('network_ping_monitor.csv_download') class="button download">$_('Download local log')</a>
            <a href="?delete" class="button cancel danger">$_('Delete all local logs')</a></br>
        $if plugin_options['type_log'] == 1:
            <a href=$plugins.plugin_url('network_ping_monitor.csv_download') class="button download">$_('Download database log')</a>
            <a href="?delSQL" class="button cancel danger">$_('Delete SQL table')</a></br>

        <a href="" class="button refresh">$_('Refresh')</a></br>
        <a href="$plugins.plugin_url('network_ping_monitor.graph_page')" class="button backup">$_('Show graph')</a>        
        <a href=$plugins.plugin_url('network_ping_monitor.settings_page') class="button submit">$_('Cancel')</a>
        </p><br/>

        <table class="logList">
            <tr class="log_rec">
                $if plugin_options['type_log'] == 0:
                    <th>$_('Date')</th>
                    <th>$_('Time')</th>
                $else:
                    <th>$_('Id')</th>
                    <th>$_('Date Time')</th>

                <th>${plugin_options['address_1']} (${plugin_options["label_1"]})</th>
                <th>${plugin_options['address_2']} (${plugin_options["label_2"]})</th>
                <th>${plugin_options['address_3']} (${plugin_options["label_3"]})</th>
                <th>$_('Event')</th>
            </tr>

            $if plugin_options['type_log'] == 0:
                $for interval in records:
                    <tr class="log_rec ${loop.parity}">
                        <td align='left'>${interval["date"]}</td>
                        <td align='left'>${interval["time"]}</td>

                        $if interval["ping1"] == 1:
                            <td align='left'><p style="color:green">$_('Available') (${interval["rtt1"]} ms)</p></td>
                        $else:
                            <td align='left'><p style="color:red">$_('Not available')</p></td>

                        $if interval["ping2"] == 1:
                            <td align='left'><p style="color:green">$_('Available') (${interval["rtt2"]} ms)</p></td>
                        $else:
                            <td align='left'><p style="color:red">$_('Not available')</p></td>

                        $if interval["ping3"] == 1:
                            <td align='left'><p style="color:green">$_('Available') (${interval["rtt3"]} ms)</p></td>
                        $else:
                            <td align='left'><p style="color:red">$_('Not available')</p></td>

                        <td align='left'>${interval["event"]}</td>
                    </tr>

            $if plugin_options['type_log'] == 1 and records_sql is not None:
                $for interval in records_sql:
                    <tr class="log_rec ${loop.parity}">
                        <td align='left'>${interval[0]}</td>
                        <td align='left'>${interval[1]}</td>

                        $if str(interval[3]) == "1":
                            <td align='left'><p style="color:green">$_('Available') (${interval[6]} ms)</p></td>
                        $else:
                            <td align='left'><p style="color:red">$_('Not available')</p></td>

                        $if str(interval[4]) == "1":
                            <td align='left'><p style="color:green">$_('Available') (${interval[7]} ms)</p></td>
                        $else:
                            <td align='left'><p style="color:red">$_('Not available')</p></td>

                        $if str(interval[5]) == "1":
                            <td align='left'><p style="color:green">$_('Available') (${interval[8]} ms)</p></td>
                        $else:
                            <td align='left'><p style="color:red">$_('Not available')</p></td>

                        <td align='left'>${interval[2]}</td>
                    </tr>
        </table>
    </div>
</div>

<div id="controls">
    <a href=$plugins.plugin_url('network_ping_monitor.settings_page') class="button submit">$_('Cancel')</a><br/>
</div>