$def with()

$var title: $_('MQTT Home Assistant Plugin - help')
$var page: plugins

<div id="plugin">
    <div class="title">$_('MQTT Home Assistant Plugin - help')</div>
<h2>$_('About the MQTT HASS Plugin')</h2>

<p>$_('The MQTT HASS plugin implement MQTT Discovery for Home Assistant (HASS), including report and control of some OSPy system settings and valves (stations) over MQTT. MQTT Discovery enables automatic devices and entities enrolment from HASS user interface configuration panel, including plug-and-play availability detection, status and control.')</p>

<h2>$_('Using MQTT HASS plugin')</h2>
<p>$_('This plugin is disabled by default. If you are reading this, the mqtt_hass plugin is probably enabled on your system. Otherwise, you can enable it using the plugin manager.')</p>

<h2>$_('Requirements')</h2>
<ul>
    <li>$_('An MQTT broker such as Mosquitto is required to be accessible by OSPy device and HASS. This broker can be on different parts of the local network, on a remote network, or installed on either OSPy or HASS system.')</li>
    <li>$_('A working HASS system with an MQTT Integration such as Mosquitto broker')</li>
    <li>$_('A OSPy system with the base mqtt plugin installed and configured (see below).')</li>
    <li>$_('This plugin installed and configured on the same OSPy system as the base mqtt plugin (see below).')</li>
</ul>

<h2>$_('Setup')</h2>

<h3>$_('On OSPy - base MQTT plugin setup')</h3>
<ul>
    <li>$_('Install eclipse paho if not already on the Pi')</li>
    <li>$_('Install the base MQTT plugin')</li>
    <li>$_('Configure base MQTT plugin')</li>
    <ul>
        <li>$_('MQTT Broker Host: This will be the URL of the MQTT broker or localhost if the broker is running on OSPy')</li>
        <li>$_('MQTT Broker Port: Default is 1883 but may be different depending on your MQTT broker')</li>
        <li>$_('MQTT Broker Username: Default is mosquitto but depends on your setup.')</li>
        <li>$_('MQTT Broker Password: Depends on your setup. Use pass as default')</li>
        <li>$_('MQTT Client ID: A unique name for OSPy system. Default is OSPy System name but can be changed on Options webpage.')</li>
    </ul>
</ul>

<h3>$_('On OSPy - MQTT HASS plugin setup')</h3>
<ul>
    <li>$_('Install Python python-slugify package if not already on the pi.')</li>
    <li><i>sudo apt install python3 slugify</i></li>
    <li>$_('Configure MQTT HASS plugin.')</li>
    <ul>
        <li>$_('Topic prefix: This prefix is used for OSPy system parameters and zones published to the MQTT broker. Leave this option empty to use a slugified OSPy System name. This setting will be slugified when saved. (Default: System name or "OSPy" if System name is empty).')</li>
        <li>$_('Name prefix: Used as prefix for all HASS devices and entities names. Leave this option empty to use a OSPy System name as prefix. For entities, this setting will be slugified. (Default: System name or "OSPy" if System name is empty).')</li>
        <li>$_('OSPy FQDN: OSPy network name or IP address. Used to compose the URL link to OSPy web interface displayed in HASS devices settings. Leave this option empty to use OSPy hostname or IP address used to connect with the MQTT broker. (Default: OSPy hostname).')</li>
        <li>$_('Device is Station name: if checked, use station name as part of HASS Device name. Changes to OSPy station name will update HASS Device name. (Default: unchecked)')</li>
    </ul>
</ul>

<h3>$_('On Home Assistant - MQTT setup')</h3>
<ul>
    <li>$_('Follow Home Assistant instructions to add MQTT integration via the user interface. MQTT discovery feature is enabled by default. MQTT integration will detect OSPy settings parameters and zones as devices and entities.')</li>
    <li>$_('Follow Home Assistant instructions to configure and use the newly added devices and entities.')</li>
</ul>

<h3>$_('Multiple OSPy systems connected to the same MQTT broker or Home Assistant instance')</h3>
<ul>
    $_('To integrate multiple OSPy systems, on each OSPy:')
    <li>$_('Use different "System name" as set on OSPy Options webpage. Default OSPy System name is "OSPy"')</li>
    <li>$_('For each MQTT HASS plugin use different Topic prefix and Name prefix.')</li>
</ul>

<h2>$_('Home Assistant - available OSPy Devices and Entities')</h2>
$_('Devices and associated Entities made available with this plugin are:')
<ul>
    <li>TODO</li>
</ul>

<div id="controls">
    <a href=$plugins.plugin_url('mqtt_home_assistant.settings_page') class="button danger">$_('Cancel')</a><br/>
</div>
